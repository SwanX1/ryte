{{#if session_user}}
  <div class="segmented-control feed-tabs" style="margin-bottom: 1.5rem;">
    <button id="tab-personalized" class="segment active">Personalized Feed</button>
    <button id="tab-recent" class="segment">Recent Feed</button>
  </div>
  <h1 class="welcome">Welcome back, {{session_user.username}}!</h1>
  <hr>
  <div class="feed-section-container">
  <div id="personalized_feed" class="feed-section active">
    {{#if personalizedPosts.length}}
      {{#each personalizedPosts}}
        {{> post post=this}}
      {{/each}}
    {{else}}
      <div class="empty-feed">No posts from users you follow yet.</div>
    {{/if}}
  </div>
  </div>
{{else}}
  <div class="card">
    <p>Please <a href="/auth/login">login</a> or <a href="/auth/signup">sign up</a> to start posting.</p>
  </div>
{{/if}}
<div class="feed-section-container">
<div id="recent_feed" class="feed-section {{#unless session_user}}active{{/unless}}">
  {{#if recentPosts.length}}
    {{#each recentPosts}}
      {{> post post=this}}
    {{/each}}
  {{else}}
    <div class="empty-feed">No posts yet.</div>
  {{/if}}
</div>
</div>
{{#if session_user}}
  <script>
    const tabPersonalized = document.getElementById('tab-personalized');
    const tabRecent = document.getElementById('tab-recent');
    const personalizedFeed = document.getElementById('personalized_feed');
    const recentFeed = document.getElementById('recent_feed');
    tabPersonalized.addEventListener('click', function() {
      tabPersonalized.classList.add('active');
      tabRecent.classList.remove('active');
      personalizedFeed.classList.add('active');
      recentFeed.classList.remove('active');
    });
    tabRecent.addEventListener('click', function() {
      tabRecent.classList.add('active');
      tabPersonalized.classList.remove('active');
      recentFeed.classList.add('active');
      personalizedFeed.classList.remove('active');
    });
  </script>
{{/if}}
